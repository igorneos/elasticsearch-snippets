#!/bin/bash
HOST="192.168.1.100"
ANO=`date +%Y`
MES=`date +%m`
DIA=`date +%d`
TMP="/root/reports/elk_report-$ANO$MES$DIA"
STATUS_NODES=`curl -XGET "http://$HOST:9200/_cat/nodes?v"`
STATUS_ILM=`curl -XGET "http://$HOST:9200/_ilm/status"`
STATUS_SHARDS=`curl -XGET "http://$HOST:9200/_cat/shards?v"`
STATUS_CLUSTER=`curl -XGET "http://$HOST:9200/_cluster/health?pretty"`
STATUS_ALLOCATION=`curl -XGET "http://$HOST:9200/_cluster/allocation/explain"`
STATUS_POOL=`curl -XGET "http://$HOST:9200/_cat/thread_pool?v"`
> $TMP
echo "################################################################################################"  >> $TMP
echo "                                       STATUS_NODE" >> $TMP
echo "################################################################################################"  >> $TMP
echo "$STATUS_NODES" >> $TMP
echo "################################################################################################"  >> $TMP
echo "################################################################################################"  >> $TMP
echo "################################################################################################"  >> $TMP
echo "                                       STATUS_ILM" >> $TMP
echo "################################################################################################"  >> $TMP
echo "$STATUS_ILM" >> $TMP
echo "################################################################################################"  >> $TMP
echo "################################################################################################"  >> $TMP
echo "################################################################################################"  >> $TMP
echo "                                       STATUS_SHARDS" >> $TMP
echo "################################################################################################"  >> $TMP
echo "$STATUS_SHARDS" >> $TMP
echo "################################################################################################"  >> $TMP
echo "################################################################################################"  >> $TMP
echo "################################################################################################"  >> $TMP
echo "                                       STATUS_CLUSTER" >> $TMP
echo "################################################################################################"  >> $TMP
echo "$STATUS_CLUSTER" >> $TMP
echo "################################################################################################"  >> $TMP
echo "################################################################################################"  >> $TMP
echo "################################################################################################"  >> $TMP
echo "                                       STATUS_ALLOCATION" >> $TMP
echo "################################################################################################"  >> $TMP
echo "$STATUS_ALLOCATION" >> $TMP
echo "################################################################################################"  >> $TMP
echo "################################################################################################"  >> $TMP
echo "################################################################################################"  >> $TMP
echo "                                       STATUS_POOL" >> $TMP
echo "################################################################################################"  >> $TMP
echo "$STATUS_POOL" >> $TMP
echo "################################################################################################"  >> $TMP
echo "################################################################################################"  >> $TMP